(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{2741:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,8173,23)),Promise.resolve().then(r.bind(r,1754))},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},1754:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var s=r(5155),a=r(2115),o=r(6046),i=r(8897),l=r.n(i);function u(){let[e,t]=(0,a.useState)({otp:""}),[r,i]=(0,a.useState)(!1),u=(0,o.useRouter)(),n=async t=>{t.preventDefault(),i(!0);try{let t={"Content-Type":"application/json"},r="e18d5c7000ca249fad54b480baef48d13480411cc9d83fbcbf7f1bcb4ca534d7";r&&(t["api-key"]=r);let s=await fetch("/api/auth/verify-otp",{method:"POST",headers:t,body:JSON.stringify(e)});if(s.ok){let e=await s.json();l().fire("OTP Verified!","You will be redirected shortly.","success").then(()=>{"Media House"===e.user.role.title?u.push("http://203.29.5173"):"Advertiser"===e.user.role.title?u.push("http://202.393"):u.push("/")})}else{let e=await s.text();l().fire("Failed to verify",e,"error")}}catch(e){e instanceof Error?l().fire("Failed to retrieve otp",e.message,"error"):l().fire("Failed to retrieve otp","An unknown error occurred","error")}finally{i(!1)}};return(0,s.jsxs)("form",{className:"w-full max-w-sm space-y-6",onSubmit:n,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"otp",className:"block text-black text-sm",children:"OTP"}),(0,s.jsx)("input",{type:"text",id:"otp",className:"w-full mt-1 px-4 py-2 border border-gray-300 bg-white rounded-lg shadow-sm",placeholder:"XXXXXX",value:e.otp,onChange:e=>{let{id:r,value:s}=e.target;t(e=>({...e,[r]:s}))}})]}),(0,s.jsx)("button",{type:"submit",className:"w-full py-1 bg-[#F20519] border border-[#F20519] text-white rounded-lg shadow-md hover:bg-black",disabled:r,children:"Submit"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[320,173,441,517,358],()=>t(2741)),_N_E=e.O()}]);