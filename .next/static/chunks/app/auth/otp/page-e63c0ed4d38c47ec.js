(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{2741:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,8173,23)),Promise.resolve().then(s.bind(s,1754))},6046:(e,t,s)=>{"use strict";var r=s(6658);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},1754:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var r=s(5155),a=s(2115),i=s(8173),n=s.n(i),l=s(6046),o=s(8897),u=s.n(o);function d(){let[e,t]=(0,a.useState)(Array(6).fill("")),[s,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(30),c=(0,l.useRouter)();(0,a.useEffect)(()=>{let e;return o>0&&(e=setTimeout(()=>d(o-1),1e3)),()=>clearTimeout(e)},[o]);let f=(s,r)=>{if(isNaN(s.value))return!1;t([...e.map((e,t)=>t===r?s.value:e)]),s.nextSibling&&s.nextSibling.focus()},h=async t=>{t.preventDefault(),i(!0);let s=e.join("");try{let e=await fetch("/api/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json","api-key":"e18d5c7000ca249fad54b480baef48d13480411cc9d83fbcbf7f1bcb4ca534d7"},body:JSON.stringify({otp:s})});if(e.ok){let t=await e.json();u().fire("OTP Verified!","You will be redirected shortly.","success").then(()=>{var e,s;let r=null===(s=t.user)||void 0===s?void 0:null===(e=s.role)||void 0===e?void 0:e.title;"Media House"===r?c.push("http://209.38.120.126:5174"):"Advertiser"===r?c.push("http://209.38.120.126:5173"):c.push("/")})}else{let t=await e.json();u().fire("Failed to verify",t.message,"error")}}catch(e){u().fire({title:"Failed to retrieve otp",text:e.message||"An unknown error occurred",icon:"error"})}finally{i(!1)}};return(0,r.jsxs)("form",{className:"w-full max-w-sm space-y-6",onSubmit:h,children:[(0,r.jsx)("div",{className:"flex justify-between space-x-3",children:e.map((e,t)=>(0,r.jsx)("input",{type:"text",maxLength:1,className:"w-12 h-10 px-4 text-center form-control border border-gray-300 bg-white rounded-lg ",value:e,onChange:e=>f(e.target,t)},t))}),(0,r.jsx)("div",{className:"text-center",children:o>0?(0,r.jsxs)("span",{className:"text-sm flex justify-end",children:["Resend in ",o," seconds"]}):(0,r.jsx)(n(),{href:"#",onClick:()=>d(30),children:(0,r.jsx)("p",{className:"text-sm flex text-red-500 justify-end underline",children:"Request again"})})}),(0,r.jsx)("button",{type:"submit",className:"w-full py-1 text-sm bg-[#FDDCDF] border-[#FDDCDF] border text-[#F20519] rounded-lg shadow-md hover:bg-[#F20519] hover:text-white",disabled:s,children:"Submit"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[320,173,441,517,358],()=>t(2741)),_N_E=e.O()}]);